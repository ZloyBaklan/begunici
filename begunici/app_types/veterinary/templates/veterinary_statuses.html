
{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="container-fluid">
    <div class="row mb-4">
        <div class="col-12">
            <h1 class="mb-3">Управление статусами</h1>
        </div>
    </div>

    <div class="row">
        <!-- Форма создания/редактирования -->
        <div class="col-lg-4 mb-4">
            <div class="card">
                <div class="card-header">
                    <h5 class="card-title mb-0" id="form-title">Создать статус</h5>
                </div>
                <div class="card-body">
                    {% csrf_token %}
                    <form id="create-status-form">
                        <div class="mb-3">
                            <label for="status-type" class="form-label">Название статуса:</label>
                            <input type="text" id="status-type" name="status-type" class="form-control" 
                                   placeholder="Введите название статуса">
                        </div>

                        <div class="mb-3">
                            <label for="status-date" class="form-label">Дата статуса:</label>
                            <input type="date" id="status-date" name="status-date" class="form-control">
                        </div>

                        <div class="mb-3">
                            <label for="status-color" class="form-label">Цвет статуса:</label>
                            <input type="color" id="status-color" name="status-color" class="form-control form-control-color" 
                                   value="#FFFFFF" title="Выберите цвет">
                        </div>

                        <div class="d-grid gap-2">
                            <button type="button" id="create-status-button" class="btn btn-primary" onclick="handleCreateOrUpdateStatus()">
                                Создать статус
                            </button>
                            <button type="button" id="cancel-edit-button" class="btn btn-secondary" onclick="cancelEdit()" style="display: none;">
                                Отменить редактирование
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Список статусов -->
        <div class="col-lg-8 mb-4">
            <div class="card">
                <div class="card-header">
                    <div class="row align-items-center">
                        <div class="col-md-6">
                            <h5 class="card-title mb-0">Список статусов</h5>
                        </div>
                        <div class="col-md-6">
                            <input type="text" id="status-search" class="form-control" placeholder="Поиск по статусам...">
                        </div>
                    </div>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-striped table-hover">
                            <thead class="table-light">
                                <tr>
                                    <th width="10%">№</th>
                                    <th width="30%">Название статуса</th>
                                    <th width="25%">Дата статуса</th>
                                    <th width="15%">Цвет статуса</th>
                                    <th width="20%">Действия</th>
                                </tr>
                            </thead>
                            <tbody id="status-list">
                                <!-- Данные будут загружены через JavaScript -->
                            </tbody>
                        </table>
                    </div>
                    
                    <!-- Пагинация -->
                    <div id="pagination" class="mt-3"></div>
                    
                    <!-- Сообщения -->
                    <div id="status-message" class="alert" style="display: none;" role="alert"></div>
                </div>
            </div>
        </div>
    </div>
</div>

<script type="module" src="{% static 'js/vet_statuses.js' %}"></script>

<style>
/* Дополнительные стили для страницы */
.table th {
    border-top: none;
    font-weight: 600;
}

.table td {
    vertical-align: middle;
}

.btn-group-sm .btn {
    padding: 0.25rem 0.5rem;
    font-size: 0.875rem;
}

.form-control-color {
    width: 100%;
    height: 38px;
}

/* Стили для сообщений */
.alert {
    margin-top: 1rem;
}

/* Адаптивность для мобильных */
@media (max-width: 768px) {
    .col-lg-4, .col-lg-8 {
        margin-bottom: 1rem;
    }
    
    .table-responsive {
        font-size: 0.875rem;
    }
    
    .btn-group-sm .btn {
        padding: 0.2rem 0.4rem;
        font-size: 0.75rem;
    }
}
</style>

{% endblock %}
